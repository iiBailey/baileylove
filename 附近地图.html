<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>附近景点</title>
  <link rel="shortcut icon" href="img/草莓.png" type="image/x-icon" />
  <link rel="stylesheet" href="css\首页.css">
  <link rel="stylesheet" href="css/nearby.css">
  <script type="text/javascript" src="https://api.map.baidu.com/api?v=2.0&ak=5UvMiEKxtANEKU0a9vKTVESTbqPh4gKF"></script>
  <script type="text/javascript" src="script/附近.js"></script>
</head>
<body>
    <div class="head">
        <div class="logo">
            <a href="" id="tubiao"></a>
            <a href="" id="caomei">草莓旅游</a>
        </div>
        <!-- 中间导航 -->
        <div class="nav">
        <ul>
            <li>
                <a href="首页.html" id="first">首页</a>
            </li>
            <li>
                <a href="mudi.html">目的地</a>
            </li>
            <li>
                <a href="附近地图.html" id="second">附近景点</a>
            </li>
            <li>
                <a href="">订机票</a>
            </li>
            <li>
                <a href="">订火车票</a>
            </li>
            <li>
                <a href="">买特产</a>
            </li>
            <li>
                <a href="">酒店/民俗</a>
            </li>
            <li>
                <a href="">社区</a>
            </li>
            <li>
                <a href="">排行榜</a>
            </li>
        </ul>
    </div>
    <!-- 登录 注册按钮-->
    <div class="login">
        <a href="" class="login-btn">登录</a>
        <a href="" class="login-btn">注册</a>
    </div>
    </div>
    <div class="titlep">
    <span class="titlet">我附近的景点</span>
    </div>
  <div id="map"></div>
  <div class="table1">
  <table id="locationTable">
  </table>
</div>
  <script type="text/javascript">
    // 初始化地图
 var map = new BMap.Map("map");
 map.centerAndZoom(new BMap.Point(120.541179, 31.845115), 12); 
 var locations = [
 { name: "沙洲公园", point: new BMap.Point(120.551049, 31.869287) },
 { name: "梁丰生态园", point: new BMap.Point(120.573172, 31.853577) },
 { name: "张家港公园", point: new BMap.Point(120.52927, 31.86156) },
 { name: "暨阳湖", point: new BMap.Point(120.541179, 31.845115) },
 { name: "黄泗浦生态园", point: new BMap.Point(120.615701, 31.832979) },  
 { name: "香山", point: new BMap.Point(120.398378, 31.924085) },
 { name: "常阴沙", point: new BMap.Point(120.788564, 31.868995) }
 ];
 for (var i = 0; i < locations.length; i++) {
     var marker = new BMap.Marker(locations[i].point); 
     map.addOverlay(marker);
     var label = new BMap.Label(locations[i].name, { offset: new BMap.Size(20, -10) }); 
     marker.setLabel(label);
 }
</script>
<script type="text/javascript">
 document.addEventListener("DOMContentLoaded", function() {
    navigator.geolocation.getCurrentPosition(function(position) {
      var userPoint = new BMap.Point(position.coords.longitude, position.coords.latitude);
      var table = document.getElementById("locationTable");
      for (var i = 0; i < locations.length; i++) {
        var distance = map.getDistance(locations[i].point, userPoint).toFixed(2);
        var row = table.insertRow(-1);
        var cell1 = row.insertCell(0);
        cell1.className = "one";
        cell1.textContent = locations[i].name;
        var cell2 = row.insertCell(1);
        cell2.className = "two";
        cell2.textContent = "距您" + distance + "米";
        var cell3 = row.insertCell(2);
        cell3.className = "three";
        for (var j = 1; j <= 3; j++) {
          var img = document.createElement("img");
          img.src = "img/image" + (i * 3 + j) + ".jpg";
          img.style.marginRight = "15px";
          cell3.appendChild(img);
        }
        cell3.style.textAlign = "center";
      }
    });
  });
</script>

</body>
</html>

</html>